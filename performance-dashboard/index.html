<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trading Performance Dashboard</title>
    <script src="https://cdn.plot.ly/plotly-2.24.1.min.js"></script>
    <link rel="stylesheet" href="assets/css/dashboard.css">
    <style>
        /* 确保表格在容器中正确显示 */
        .plot-container {
            width: 100%;
            overflow-x: auto;
        }
    </style>
</head>
<body>
    <div class="dashboard-container">
        <div class="dashboard-header">
            <h1>Trading Performance Analysis</h1>
            <div class="dashboard-subtitle">Last Updated: 2025-12-24 23:49:52</div>
        </div>
        
        <div class="plot-container" id="performance-table"></div>
    </div>
    
    <script>
        // 获取原始的Plotly图表数据
        const plotlyDiv = document.createElement('div');
        
        // 这里需要嵌入实际的Plotly图表代码
        // 由于Plotly图表已经保存为单独的文件，我们需要读取它
        fetch('plotly_chart.html')
            .then(response => response.text())
            .then(data => {
                // 提取Plotly图表div
                const parser = new DOMParser();
                const doc = parser.parseFromString(data, 'text/html');
                const plotlyContent = doc.querySelector('div.plot-container, div.js-plotly-plot');
                
                if (plotlyContent) {
                    document.getElementById('performance-table').innerHTML = plotlyContent.outerHTML;
                    
                    // 重新初始化Plotly
                    setTimeout(() => {
                        if (typeof Plotly !== 'undefined') {
                            const plotDiv = document.querySelector('.js-plotly-plot');
                            if (plotDiv) {
                                Plotly.Plots.resize(plotDiv);
                            }
                        }
                    }, 100);
                }
            })
            .catch(error => {
                console.error('Error loading plotly chart:', error);
                // 如果无法加载外部文件，创建一个简单的表格容器
                document.getElementById('performance-table').innerHTML = 
                    '<div style="text-align:center; padding:50px; color:#666;">Performance table loading...</div>';
            });
        
        // 窗口大小改变时重新调整图表大小
        window.addEventListener('resize', function() {
            const plotDiv = document.querySelector('.js-plotly-plot');
            if (plotDiv && typeof Plotly !== 'undefined') {
                Plotly.Plots.resize(plotDiv);
            }
        });
    </script>
</body>
</html>